---
import Icon from "../common/Icon.astro";
import Logo from "./Logo.astro";
import texts from "@/utils/texts.json";

const Navlinks = [
  { name: "About", href: "/about" },
  { name: "Services", href: "/services" },
  { name: "Contact", href: "/contact" },
  { name: "FAQ", href: "/faq" },
];
const Legallinks = [
  { name: "Impressum", href: "/legal" },
  { name: "Datenschutz", href: "/privacypolicy" },
  { name: "AGB", href: "/termsconditions" },
];

const footerTexts = texts.footer;
---

<footer class="bg-deep-blue mx-auto px-4" role="contentinfo">
  <div class="container mx-auto p-4 py-6 lg:py-8">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
      <!-- Company Information -->
      <div class="footer-top mb-6 md:mb-0">
        <a
          href="/"
          class="flex justify-center md:justify-start items-center mb-4"
          aria-label="Zur Startseite"
        >
          <Logo class="h-12 max-w-fit" color="white" />
        </a>
        <p
          class="text-white font-ag-body-text text-ag-body-text mb-4 text-center md:text-left lg:w-11/12"
        >
          {footerTexts.slogan}
        </p>
        <div
          class="flex justify-center md:justify-start space-x-2 text-soft-orange"
          role="list"
          aria-label="Social Media Links"
        >
          <Icon
            icons={[
              { 
                name: "facebook", 
                href: footerTexts.socialLinks.facebook,
                ariaLabel: "Facebook Seite besuchen"
              },
              { 
                name: "instagram", 
                href: footerTexts.socialLinks.instagram,
                ariaLabel: "Instagram Profil besuchen"
              },
            ]}
            size="small"
            variant="accent"
          />
        </div>
      </div>

      <!-- Navigation Links -->
      <nav class="text-center md:text-left" aria-labelledby="footer-nav-heading">
        <h3 id="footer-nav-heading" class="mb-6 text-soft-orange font-ag-h5 text-ag-h5">
          {footerTexts.linksTitle}
        </h3>
        <ul class="text-white font-ag-body-text text-ag-body-text" role="list">
          {
            Navlinks.map((link) => (
              <li class="mb-4">
                <a 
                  href={link.href} 
                  class="hover:underline focus:outline-none focus:ring-2 focus:ring-soft-orange focus:ring-offset-2 focus:ring-offset-deep-blue rounded"
                >
                  {link.name}
                </a>
              </li>
            ))
          }
        </ul>
      </nav>

      <!-- Contact Information -->
      <div class="text-center md:text-left" aria-labelledby="footer-contact-heading">
        <h3 id="footer-contact-heading" class="mb-6 text-soft-orange font-ag-h5 text-ag-h5">
          {footerTexts.scheduleTitle}
        </h3>
        <p class="text-white font-ag-body-text text-ag-body-text mb-4">
          {footerTexts.schedule}
        </p>
        <a
          href={`tel:${footerTexts.phone}`}
          class="text-white font-ag-body-text text-ag-body-text hover:underline focus:outline-none focus:ring-2 focus:ring-soft-orange focus:ring-offset-2 focus:ring-offset-deep-blue rounded inline-flex items-center gap-2"
          aria-label={`Anrufen: ${footerTexts.phone}`}
        >
          <Icon 
            icons={[{ 
              name: "phone",
              ariaLabel: "Telefon Icon"
            }]} 
            size="small" 
            variant="accent" 
          />
          {footerTexts.phone}
        </a>
      </div>

      <!-- Location Information -->
      <div class="text-center md:text-left" aria-labelledby="footer-location-heading">
        <h3 id="footer-location-heading" class="mb-6 text-soft-orange font-ag-h5 text-ag-h5">
          {footerTexts.locationTitle}
        </h3>
        <address class="text-white font-ag-body-text text-ag-body-text mb-4 not-italic">
          {footerTexts.address}
        </address>
        <a
          href={footerTexts.mapLink}
          target="_blank"
          rel="noopener noreferrer"
          class="text-white font-ag-body-text text-ag-body-text hover:underline focus:outline-none focus:ring-2 focus:ring-soft-orange focus:ring-offset-2 focus:ring-offset-deep-blue rounded inline-flex items-center gap-2"
          aria-label="Standort auf Google Maps anzeigen (Ã¶ffnet in neuem Tab)"
        >
          <Icon 
            icons={[{ 
              name: "mapMarker",
              ariaLabel: "Standort Icon"
            }]} 
            size="small" 
            variant="accent" 
          />
          {footerTexts.viewMap}
        </a>
      </div>
    </div>

    <hr class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8" role="separator" />

    <!-- Legal Links and Copyright -->
    <div
      class="sm:flex sm:items-center sm:justify-between text-center md:text-left text-white font-ag-body-text text-ag-body-text"
    >
      <nav class="flex mt-4 sm:mt-0 justify-center md:justify-start space-x-4 sm:order-2" aria-label="Rechtliche Links">
        {
          ["Impressum", "Datenschutz", "AGB"].map((linkName) => {
            const link = Legallinks.find(
              (l) => l.name.toLowerCase() === linkName.toLowerCase(),
            );
            return (
              link && (
                <a 
                  href={link.href} 
                  class="hover:underline text-soft-orange focus:outline-none focus:ring-2 focus:ring-soft-orange focus:ring-offset-2 focus:ring-offset-deep-blue rounded"
                >
                  {link.name}
                </a>
              )
            );
          })
        }
      </nav>
      <p class="sm:order-1">{footerTexts.copyright}</p>
    </div>
  </div>
</footer>
