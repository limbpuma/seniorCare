---
type Props = {
  href?: string;
  target?: string;
  rel?: string;
  type?: "button" | "submit" | "reset";
  class?: string;
  variant?: "primary" | "secondary" | "accent";
  size?: "small" | "medium" | "large";
  fullWidth?: boolean;
  flex?: boolean;
  ariaLabel?: string;
  ariaDescribedBy?: string;
  disabled?: boolean;
};

const {
  href,
  target,
  rel, 
  class: className,
  variant = "primary",
  size = "medium",
  fullWidth = false,
  flex,
  ariaLabel,
  ariaDescribedBy,
  disabled = false,
  ...props
} = Astro.props;

const variantClasses = {
  primary:
    "text-white bg-deep-blue hover:bg-soft-blue focus:ring-4 focus:ring-blue-300 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",
  secondary:
    "text-deep-blue bg-white hover:bg-gray-blue focus:ring-4 focus:ring-gray-200 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",
  accent:
    "text-deep-blue bg-accent hover:bg-soft-orange focus:ring-4 focus:ring-orange-200 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",
};

const sizeClasses = {
  small: "text-sm px-4 py-2",
  medium: "text-ag-button-text px-8 py-4",
  large: "text-lg px-12 py-6",
};

const fullWidthClass = fullWidth ? "w-full" : "max-w-fit";

const baseClasses =
  "rounded-full transition-all duration-300 focus:outline-none focus-visible:ring-4 focus-visible:ring-offset-2";

const classes = [
  variantClasses[variant],
  sizeClasses[size],
  fullWidthClass,
  baseClasses,
  className,
];
---

{href ? (
  <a 
    href={href} 
    target={target} 
    rel={target === "_blank" ? "noopener noreferrer" : rel} 
    class:list={classes} 
    aria-label={ariaLabel}
    aria-describedby={ariaDescribedBy}
    {...props}
  >
    <span
      class={`font-ag-button-text text-ag-button-text ${flex && "flex gap-2"}`}
    >
      <slot />
    </span>
  </a>
) : (
  <button 
    class:list={classes} 
    disabled={disabled}
    aria-label={ariaLabel}
    aria-describedby={ariaDescribedBy}
    {...props}
  >
    <span
      class={`font-ag-button-text text-ag-button-text ${flex && "flex gap-2"}`}
    >
      <slot />
    </span>
  </button>
)}
