---
import { Image } from 'astro:assets';

interface Props {
  type: 'image' | 'video';
  src: string | ImageMetadata;
  alt?: string;
  width?: number;
  height?: number;
  posterSrc?: string;
  videoDescription?: string;
  autoplay?: boolean;
  preload?: string;
}

const { 
  type, 
  src, 
  alt = "", 
  width = 1920, 
  height = 1080, 
  posterSrc,
  videoDescription,
  autoplay = true,
  preload = "metadata"
} = Astro.props;
---
        
<div class="absolute inset-0 w-full h-full parallax-container">
  {type === 'image' ? (
    <Image
      src={src as ImageMetadata}
      alt={alt}
      width={width}
      height={height}
      class="object-cover w-full h-full parallax-image"
      loading="eager"
    />
  ) : (    <video
      class="object-cover w-full h-full parallax-image"
      autoplay={autoplay}
      loop
      muted
      playsinline
      poster={posterSrc}
      preload={preload}
      aria-label={videoDescription || "Hintergrundvideo"}
      aria-hidden="true"
    >
      <source src={src as string} type="video/webm" />
      <source src={src as string} type="video/mp4" />
      <p>Ihr Browser unterst√ºtzt das Video-Format nicht. {videoDescription && `Beschreibung: ${videoDescription}`}</p>
    </video>
  )}
</div>