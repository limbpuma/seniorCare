---
import Button from "../common/Button.astro";
import Section from "./Section.astro";

interface Stat {
  number: string;
  label: string;
}

interface Props {
  services: string[];
  stats: Stat[];
  buttonText: string;
  description: string;
  phoneNumber: string;
  headingLevel?: 2 | 3 | 4 | 5 | 6;
  imageAlt?: string;
}

const { 
  services, 
  stats, 
  buttonText, 
  description, 
  phoneNumber, 
  headingLevel = 2,
  imageAlt 
} = Astro.props;

// Generate dynamic heading tag
const HeadingTag = `h${headingLevel}` as keyof JSX.IntrinsicElements;
---

<Section 
  background="primary"
  padding="large"
  width="wide"
  height="auto"
  id="about-section"
  animation="fade-in"
  role="region"
  ariaLabel="Über uns und unsere Dienstleistungen"
>
  <div
    class="container flex flex-col lg:flex-row justify-between items-center mb-8 sm:mb-12 space-y-8 lg:space-y-0"
  >
    <div class="text-center lg:text-left lg:w-3/4 order-2 lg:order-1 text-white">      {
        services.map((service) => (
          <HeadingTag class="text-ag-h5 sm:text-ag-h4 md:text-ag-h3 lg:text-[40px] xl:text-[44px] font-ag-h3 mb-3 sm:mb-4 md:mb-6 leading-tight uppercase">
            {service}
          </HeadingTag>
        ))
      }
    </div>
    <div
      class="flex justify-center mx-auto items-center w-full sm:w-2/3 md:w-1/2 lg:w-1/4 order-1 lg:order-2 mb-8 lg:mb-0"
      role="img"
      aria-label="Profilbild unseres Teams"
    >
      <div class="relative w-full pb-[100%] mb-8">
        <img
          src="/assets/img/nurse_doctor_senior_care_1.webp"
          alt={imageAlt || "Professionelles Pflegeteam - Krankenschwester und Arzt bei der Seniorenbetreuung"}
          class="absolute inset-0 w-full h-full object-cover rounded-full bg-gray-blue sm:mx-4 mx-auto"
          loading="lazy"
        />
      </div>
      </div>
    </div>
  </div>
  <div 
    class="border-t border-soft-orange mb-8 sm:mb-12"
    role="separator"
    aria-hidden="true"
  ></div>

  <div
    class="flex flex-col lg:flex-row justify-between items-center text-center lg:text-left space-y-8 lg:space-y-0 text-white"
  >
    <div
      class="grid grid-cols-2 gap-4 sm:gap-8 md:gap-0 mb-8 lg:mb-0 w-full lg:w-1/2"
      role="region"
      aria-label="Unsere Statistiken und Zahlen"
    >      {
        stats.map(({ number, label }) => (
          <div class="text-center">
            <p 
              class="text-ag-h3 sm:text-ag-h2 lg:text-ag-h1 font-ag-h1 mb-2"
              aria-label={`${number} ${label}`}
            >
              {number}
            </p>
            <p class="mx-4 text-ag-list-text text-soft-orange font-ag-list-text">
              {label}
            </p>
          </div>
        ))
      }
    </div>

    <div class="flex flex-col lg:items-end w-full lg:w-1/2">
      <div class="mb-4 lg:mb-6 text-center lg:text-left">
        <p class="text-ag-body-text font-ag-body-text">
          {description}
        </p>
      </div>

      <div
        class="flex flex-col sm:flex-row items-center justify-center sm:justify-start lg:justify-end space-y-4 sm:space-y-0 sm:space-x-12 mx-auto"
        role="group"
        aria-label="Kontaktmöglichkeiten"
      >
        <Button 
          variant="accent" 
          size="medium" 
          href={`tel:+49 123 456 7890`}
          ariaLabel={`Anrufen: ${phoneNumber}`}
          flex={true}
        >
          <i class="fa fa-phone text-deep-blue" aria-hidden="true"></i>
          {phoneNumber}
        </Button>
        <div class="flex items-center text-ag-h5 font-ag-h5 mt-4 sm:mt-0">
          {buttonText}
        </div>
      </div>
    </div>
  </div>
</Section>