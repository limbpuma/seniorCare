---
import Head from "@/components/meta/Head.astro";
import Header from "@/components/common/Header.astro";
import Footer from "@/components/common/Footer.astro";
import CookieConsent from "@/components/common/CookieConsent.tsx";
import texts from "@/utils/texts.json";

interface Props {
  title: string;
}
interface Props {
  title: string;
  page: "home" | "about" | "services" | "contact" | "faq" | "datenschutz"  | "impressum" | "Agb" | "404"; 
}
const { title, page } = Astro.props;

const { description, keywords } = texts.seo[page] || { description: "", keywords: "" };
---

<!doctype html>
<html lang="de">
  <Head title={title} />
  <!-- Meta Description -->
  <meta name="description" content={description} />
  
  <!-- Keywords for SEO -->
  <meta name="keywords" content={keywords} />
  
  <!-- Enhanced Open Graph Meta Tags -->
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="de_DE" />
  <meta property="og:site_name" content="Pflegedienst Integra Gerling GmbH" />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:url" content={Astro.url} />
  <meta property="og:image" content="/assets/img/senior_woman_nurse.webp" />
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content="/assets/img/senior_woman_nurse.webp" />
  
  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": ["Organization", "LocalBusiness", "MedicalBusiness"],
      "name": "Pflegedienst Integra Gerling GmbH",
      "alternateName": "Integra Gerling Pflegedienst",
      "description": "Professioneller Pflegedienst in Dortmund. Häusliche Pflege, Seniorenbetreuung und 24-Stunden-Pflege mit qualifizierten Pflegekräften.",
      "url": "https://integra-gerling.de",
      "logo": "https://integra-gerling.de/favicon.svg",
      "image": "https://integra-gerling.de/assets/img/senior_woman_nurse.webp",
      "telephone": "+49-231-123456",
      "email": "info@integra-gerling.de",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Flughafenstraße 404",
        "addressLocality": "Dortmund",
        "addressRegion": "Nordrhein-Westfalen",
        "postalCode": "44328",
        "addressCountry": "DE"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "51.5136",
        "longitude": "7.4653"
      },
      "openingHours": "Mo-Fr 08:00-18:00",
      "priceRange": "$$",
      "areaServed": {
        "@type": "City",
        "name": "Dortmund"
      },
      "serviceArea": {
        "@type": "GeoCircle",
        "geoMidpoint": {
          "@type": "GeoCoordinates",
          "latitude": "51.5136",
          "longitude": "7.4653"
        },
        "geoRadius": "25000"
      },
      "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Pflegedienstleistungen",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Häusliche Krankenpflege",
              "description": "Professionelle medizinische Pflege in den eigenen vier Wänden"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Seniorenbetreuung",
              "description": "Liebevolle Betreuung und Unterstützung im Alltag für Senioren"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "24-Stunden-Pflege",
              "description": "Rundum-Betreuung rund um die Uhr in vertrauter Umgebung"
            }
          }
        ]
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "127",
        "bestRating": "5",
        "worstRating": "1"
      },
      "founder": {
        "@type": "Person",
        "name": "Integra Gerling"
      },
      "numberOfEmployees": "25-50",
      "foundingDate": "2015",
      "sameAs": [
        "https://www.facebook.com/integra-gerling",
        "https://www.linkedin.com/company/integra-gerling"
      ]
    }
  </script>
  
  <link rel="stylesheet" href="/src/styles/main.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
  />
  <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"
  ></script>  <body class="bg-white">
    <!-- Skip Links for Accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-blue-600 focus:text-white focus:px-4 focus:py-2 focus:rounded">
      Direkt zum Hauptinhalt springen
    </a>
    <a href="#main-navigation" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-48 focus:z-50 focus:bg-blue-600 focus:text-white focus:px-4 focus:py-2 focus:rounded">
      Zur Navigation springen
    </a>
    
    <Header />
    <main id="main-content" class="relative" role="main">
      <slot />
      <CookieConsent client:load />
    </main>
    <Footer />
  </body>
</html>
<style is:global>
body {
  font-family: "Montserrat", sans-serif; /* Fuente predeterminada */
}

/* Skip Links Styles */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only:focus {
  position: absolute;
  width: auto;
  height: auto;
  padding: 0.5rem 1rem;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
  z-index: 9999;
}

/* Focus indicators for better accessibility */
*:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* Custom focus for interactive elements */
button:focus,
a:focus,
input:focus,
textarea:focus,
select:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 4px;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(-40px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes zoomIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes gridIn {
  from { opacity: 0; transform: scale(0.7); }
  to { opacity: 1; transform: scale(1); }
}

.animate-on-scroll {
  opacity: 0;
  transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

.animate-on-scroll.show {
  opacity: 1;
}

.fade-in.show { 
  animation: fadeIn 0.8s ease-out forwards;
}

.slide-in.show {
  animation: slideIn 0.8s ease-out forwards;
}

.zoom-in.show {
  animation: zoomIn 0.8s ease-out forwards;
}

.grid-in.show {
  animation: gridIn 0.8s ease-out forwards;
}

.parallax {
  overflow: hidden;
  position: relative;
}

.parallax.show .parallax-bg {
  animation: fadeIn 0.8s ease-out forwards;
}

@media (prefers-reduced-motion: reduce) {
  .animate-on-scroll,
  .fade-in.show,
  .slide-in.show,
  .zoom-in.show,
  .grid-in.show,
  .parallax.show .parallax-bg {
    transition: none;
    animation: none;
    opacity: 1;
    transform: none;
  }
}
.parallax.show::before {
  animation: parallaxEffect 0.6s forwards;
}
.parallax-container {
  clip: rect(0, auto, auto, 0);
}

.parallax-image,
.parallax-video {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  will-change: transform;
  object-fit: cover;
  opacity: 0.7;
}

@media (prefers-reduced-motion: reduce) {
  .parallax-image,
  .parallax-video {
    position: absolute;
  }
}
@supports (-webkit-touch-callout: none) {
    .parallax-image,
    .parallax-video {
      position: absolute;
      height: 100vh;
      height: -webkit-fill-available;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .parallax-image,
    .parallax-video {
      position: absolute;
    }
  }
</style>
<script>
 const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
        observer.unobserve(entry.target); // Dejar de observar una vez que se ha mostrado
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.animate-on-scroll').forEach((el) => observer.observe(el));  
  </script>